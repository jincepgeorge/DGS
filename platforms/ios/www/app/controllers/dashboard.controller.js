!function(){"use strict";angular.module("DGSApp").controller("DashboardController",["$scope","$state","DataService","FlashService","ENV","$rootScope",function(t,a,o,e,n,r){r.loading=!1,t.initController=function(){r.loading=!0,e.Clear(),o.GetDashboradData(localStorage.custId,!1).then(function(a){r.loading=!1,a.success?(t.datsboardObj=a.responseData,t.datsboardObj.currentDate=t.datsboardObj.currentDate?t.datsboardObj.currentDate:(new Date).toString(),t.initGuageData(t.datsboardObj)):(e.Error(a),r.loading=!1)},function(t){e.Error(n.messages.UNKNOWN_ERROR),r.loading=!1})},t.refreshChart=function(a){t.initGuageData(a)},t.initGuageData=function(t){var a="0",o=0;screen.availWidth>320?(a=170,o="43%"):(a=120,o="41%");var e=parseFloat(t.Consumption).toFixed(2),n=t.MaxConsumption,r=e/n*100,i=function(t){var a=[],o=Math.round(10*Math.floor(t/10));for(a.push(t),s=o;s>0;s-=10)a.push({y:s});return a}(r);console.log(r);var s=0;Highcharts.chart("guage-container",{chart:{type:"solidgauge",marginTop:10},credits:!1,title:{text:""},subtitle:{text:'<div class="cons-cont"><div class="cons-text">Consumption Charge</div><br><div class="cons-text-2"> Cons</div><br><div class="cons-value">'+e+"kWh $"+parseFloat(t.Charge).toFixed(2)+"</div></div>",y:a,zIndex:7},tooltip:{enabled:!1},pane:[{startAngle:-120,endAngle:120,background:[{outerRadius:"100%",innerRadius:"80%",backgroundColor:Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(.3).get(),borderWidth:0,shape:"arc"}],size:"80%",center:["50%",o]},{startAngle:-120,endAngle:120,size:"80%",center:["50%",o],background:[{backgroundColor:"#00152a"}]}],yAxis:[{min:0,max:100,lineWidth:1,lineColor:"white",tickInterval:1,labels:{enabled:!1},minorTickWidth:0,tickLength:30,tickWidth:1,tickColor:"#4c5155",zIndex:6,plotBands:[{from:0,to:100,thickness:30,color:"#4c5155"}],stops:[[0,"#3fd213"],[.101,"#3fd213"],[.201,"#3fd213"],[.301,"#3fd213"],[.401,"#f6c102"],[.501,"#f6c102"],[.601,"#f6c102"],[.701,"#f6c102"],[.801,"#fa1b04"],[.901,"#fa1b04"],[1,"#fa1b04"]]},{linkedTo:0,pane:1,lineWidth:5,lineColor:"#00152a",tickPositions:[],zIndex:6}],series:[{animation:!0,dataLabels:{enabled:!1},borderWidth:0,color:Highcharts.getOptions().colors[0],radius:"100%",innerRadius:"80%",data:i}]})},t.initController()}])}();